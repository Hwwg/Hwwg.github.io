<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><title>sqlilabs6 - Tlife</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="Tlife"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Tlife"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="接下来是第二部分的21关其实感觉和第20关没有多大差别，我们看看源码吧  发现还是有点差别的 比如说： 有一个**$cookee &amp;#x3D; base64_decode($cookee);**好像是将cookee给编码解密了，说明前面肯定还有一个加密，我们用burp suit抓包试试"><meta property="og:type" content="article"><meta property="og:title" content="sqlilabs6"><meta property="og:url" content="http://example.com/2020/11/28/sqlilabs6/"><meta property="og:site_name" content="Tlife"><meta property="og:description" content="接下来是第二部分的21关其实感觉和第20关没有多大差别，我们看看源码吧  发现还是有点差别的 比如说： 有一个**$cookee &amp;#x3D; base64_decode($cookee);**好像是将cookee给编码解密了，说明前面肯定还有一个加密，我们用burp suit抓包试试"><meta property="og:locale" content="en_US"><meta property="og:image" content="https://raw.githubusercontent.com/Hwwg/myphoto/master/20201128010643.png"><meta property="og:image" content="https://raw.githubusercontent.com/Hwwg/myphoto/master/20201128011006.png"><meta property="og:image" content="https://raw.githubusercontent.com/Hwwg/myphoto/master/20201128013136.png"><meta property="og:image" content="https://raw.githubusercontent.com/Hwwg/myphoto/master/20201130183734.png"><meta property="og:image" content="https://raw.githubusercontent.com/Hwwg/myphoto/master/20201130183733.png"><meta property="og:image" content="https://raw.githubusercontent.com/Hwwg/myphoto/master/20201130184857.png"><meta property="og:image" content="https://raw.githubusercontent.com/Hwwg/myphoto/master/20201130184652.png"><meta property="og:image" content="https://raw.githubusercontent.com/Hwwg/myphoto/master/20201130185526.png"><meta property="og:image" content="https://raw.githubusercontent.com/Hwwg/myphoto/master/20201130190241.png"><meta property="og:image" content="https://raw.githubusercontent.com/Hwwg/myphoto/master/20201130190900.png"><meta property="og:image" content="https://raw.githubusercontent.com/Hwwg/myphoto/master/20201130195221.png"><meta property="og:image" content="https://raw.githubusercontent.com/Hwwg/myphoto/master/20201130213549.png"><meta property="og:image" content="https://raw.githubusercontent.com/Hwwg/myphoto/master/20201201115020.png"><meta property="og:image" content="https://raw.githubusercontent.com/Hwwg/myphoto/master/20201201004552.png"><meta property="og:image" content="https://raw.githubusercontent.com/Hwwg/myphoto/master/20201201004553.png"><meta property="og:image" content="https://raw.githubusercontent.com/Hwwg/myphoto/master/20201201004554.png"><meta property="og:image" content="https://raw.githubusercontent.com/Hwwg/myphoto/master/20201201124258.png"><meta property="og:image" content="https://raw.githubusercontent.com/Hwwg/myphoto/master/20201201124257.png"><meta property="og:image" content="https://raw.githubusercontent.com/Hwwg/myphoto/master/20201201124851.png"><meta property="og:image" content="https://raw.githubusercontent.com/Hwwg/myphoto/master/20201201125357.png"><meta property="og:image" content="https://raw.githubusercontent.com/Hwwg/myphoto/master/20201201155743.png"><meta property="og:image" content="https://raw.githubusercontent.com/Hwwg/myphoto/master/20201201155935.png"><meta property="og:image" content="https://raw.githubusercontent.com/Hwwg/myphoto/master/20201201160042.png"><meta property="og:image" content="https://raw.githubusercontent.com/Hwwg/myphoto/master/20201201192222.png"><meta property="og:image" content="https://raw.githubusercontent.com/Hwwg/myphoto/master/20201202132344.png"><meta property="og:image" content="https://raw.githubusercontent.com/Hwwg/myphoto/master/20201202193040.png"><meta property="og:image" content="https://raw.githubusercontent.com/Hwwg/myphoto/master/20201202195735.png"><meta property="og:image" content="https://raw.githubusercontent.com/Hwwg/myphoto/master/20201202213910.png"><meta property="og:image" content="https://raw.githubusercontent.com/Hwwg/myphoto/master/20201203122737.png"><meta property="og:image" content="https://raw.githubusercontent.com/Hwwg/myphoto/master/20201203124541.png"><meta property="article:published_time" content="2020-11-27T16:56:50.000Z"><meta property="article:modified_time" content="2021-02-04T03:31:05.198Z"><meta property="article:author" content="vague huang"><meta property="article:tag" content="sql注入"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="https://raw.githubusercontent.com/Hwwg/myphoto/master/20201128010643.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://example.com/2020/11/28/sqlilabs6/"},"headline":"sqlilabs6","image":["https://raw.githubusercontent.com/Hwwg/myphoto/master/20201128010643.png","https://raw.githubusercontent.com/Hwwg/myphoto/master/20201128011006.png","https://raw.githubusercontent.com/Hwwg/myphoto/master/20201128013136.png","https://raw.githubusercontent.com/Hwwg/myphoto/master/20201130183734.png","https://raw.githubusercontent.com/Hwwg/myphoto/master/20201130183733.png","https://raw.githubusercontent.com/Hwwg/myphoto/master/20201130184857.png","https://raw.githubusercontent.com/Hwwg/myphoto/master/20201130184652.png","https://raw.githubusercontent.com/Hwwg/myphoto/master/20201130185526.png","https://raw.githubusercontent.com/Hwwg/myphoto/master/20201130190241.png","https://raw.githubusercontent.com/Hwwg/myphoto/master/20201130190900.png","https://raw.githubusercontent.com/Hwwg/myphoto/master/20201130195221.png","https://raw.githubusercontent.com/Hwwg/myphoto/master/20201130213549.png","https://raw.githubusercontent.com/Hwwg/myphoto/master/20201201115020.png","https://raw.githubusercontent.com/Hwwg/myphoto/master/20201201004552.png","https://raw.githubusercontent.com/Hwwg/myphoto/master/20201201004553.png","https://raw.githubusercontent.com/Hwwg/myphoto/master/20201201004554.png","https://raw.githubusercontent.com/Hwwg/myphoto/master/20201201124258.png","https://raw.githubusercontent.com/Hwwg/myphoto/master/20201201124257.png","https://raw.githubusercontent.com/Hwwg/myphoto/master/20201201124851.png","https://raw.githubusercontent.com/Hwwg/myphoto/master/20201201125357.png","https://raw.githubusercontent.com/Hwwg/myphoto/master/20201201155743.png","https://raw.githubusercontent.com/Hwwg/myphoto/master/20201201155935.png","https://raw.githubusercontent.com/Hwwg/myphoto/master/20201201160042.png","https://raw.githubusercontent.com/Hwwg/myphoto/master/20201201192222.png","https://raw.githubusercontent.com/Hwwg/myphoto/master/20201202132344.png","https://raw.githubusercontent.com/Hwwg/myphoto/master/20201202193040.png","https://raw.githubusercontent.com/Hwwg/myphoto/master/20201202195735.png","https://raw.githubusercontent.com/Hwwg/myphoto/master/20201202213910.png","https://raw.githubusercontent.com/Hwwg/myphoto/master/20201203122737.png","https://raw.githubusercontent.com/Hwwg/myphoto/master/20201203124541.png"],"datePublished":"2020-11-27T16:56:50.000Z","dateModified":"2021-02-04T03:31:05.198Z","author":{"@type":"Person","name":"vague huang"},"publisher":{"@type":"Organization","name":"Tlife","logo":{"@type":"ImageObject"}},"description":"接下来是第二部分的21关其实感觉和第20关没有多大差别，我们看看源码吧  发现还是有点差别的 比如说： 有一个**$cookee &#x3D; base64_decode($cookee);**好像是将cookee给编码解密了，说明前面肯定还有一个加密，我们用burp suit抓包试试"}</script><link rel="canonical" href="http://example.com/2020/11/28/sqlilabs6/"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.0.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><!--!--><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }

          const id = '#' + CSS.escape(location.hash.substring(1));
          const $tabMenu = document.querySelector(`.tabs a[href="${id}"]`);
          if (!$tabMenu) {
            return;
          }

          const $tabMenuContainer = $tabMenu.parentElement.parentElement;
          Array.from($tabMenuContainer.children).forEach($menu => $menu.classList.remove('is-active'));
          Array.from($tabMenuContainer.querySelectorAll('a'))
              .map($menu => document.getElementById($menu.getAttribute("href").substring(1)))
              .forEach($content => $content.classList.add('is-hidden'));

          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
          const $activeTab = document.querySelector(id);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"></head><body class="is-1-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/">Tlife</a></div><div class="navbar-menu"><div class="navbar-end"></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-12"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2020-11-27T16:56:50.000Z" title="2020/11/28 上午12:56:50">2020-11-28</time></span><span class="level-item">Updated&nbsp;<time dateTime="2021-02-04T03:31:05.198Z" title="2021/2/4 上午11:31:05">2021-02-04</time></span></div></div><h1 class="title is-3 is-size-4-mobile">sqlilabs6</h1><div class="content"><h3 id="接下来是第二部分的21关"><a href="#接下来是第二部分的21关" class="headerlink" title="接下来是第二部分的21关"></a>接下来是第二部分的21关</h3><p>其实感觉和第20关没有多大差别，我们看看源码吧  发现还是有点差别的 比如说：<br><img src="https://raw.githubusercontent.com/Hwwg/myphoto/master/20201128010643.png" alt="img" style="zoom: 80%;"></p>
<p>有一个**$cookee = base64_decode($cookee);**<br>好像是将cookee给编码解密了，说明前面肯定还有一个加密，我们用burp suit抓包试试  <a id="more"></a><img src="https://raw.githubusercontent.com/Hwwg/myphoto/master/20201128011006.png" alt="img"></p>
<p>果不其然 他的cookee被加密了 我们直接网页搜索解密软件 然后发现结果是 admin<br>然后我们利用这里来注入一下 看下源代码 发现是’)单引号组合括号的 ，然后我直接输入’) and 1=1# 发现他报错了</p>
<p><strong><em>\</em>Issue with your mysql: Illegal mix of collations (gbk_chinese_ci,IMPLICIT) and (utf8mb4_0900_ai_ci,COERCIBLE) for operation ‘=’**</strong>有点奇怪 我们再来看看源代码</p>
<p><img src="https://raw.githubusercontent.com/Hwwg/myphoto/master/20201128013136.png" alt="img"></p>
<p>可以发现这边这个使用的是encode<br><strong>base64_encode是加密,而base64_decode是解密</strong><br>所以我们来思考一下他代码是如何运行的<br><img src="https://raw.githubusercontent.com/Hwwg/myphoto/master/20201130183734.png" alt="img" style="zoom:50%;"></p>
<img src="https://raw.githubusercontent.com/Hwwg/myphoto/master/20201130183733.png" alt="img" style="zoom:67%;">

<p>他是这样的 如果账号密码正确 则保存你此时的cookies，并且加密发送，所以我再burp suit抓包的时候，抓到的用户名就是加密的，然后跳转到下一个页面，在这个页面中要利用cookies输出账号密码，所以他又解码输出了，而这个时候如果我们要利用burp suit修改cookies的数据达到注入的目的，我们就需要将我们的注入语句也进行加密，这样他解密以后才会被mysql识别并执行命令。OK  大概了解整个运转过程后，我们寻找注入点<br>发现在下面 有个’）单引号加括号的注入点，然后我们在burp suit注入试试<img src="https://raw.githubusercontent.com/Hwwg/myphoto/master/20201130184857.png" alt="img">uname后面的那串东西是1’)and extractvalues(1,concat(‘<del>‘,database(),’</del>‘))# 经过base64位编码以后的结果</p>
<p><img src="https://raw.githubusercontent.com/Hwwg/myphoto/master/20201130184652.png" alt="img"></p>
<p>这个又是什么神仙报错？？？？  但是我们可以看到有个security 我们数据库的名字的出现 但是为了避免不是偶然我们再试试看，我无语了 <strong>原来是我函数名输错了，应该是extractvalue</strong> 所以正确的界面应该是</p>
<img src="https://raw.githubusercontent.com/Hwwg/myphoto/master/20201130185526.png" alt="img" style="zoom:67%;">

<p>OK  利用报错注入成功</p>
<h2 id="第22关"><a href="#第22关" class="headerlink" title="第22关"></a>第22关</h2><p>这一题和上一题又有点不一样，题目说是基于双引号的注入<img src="https://raw.githubusercontent.com/Hwwg/myphoto/master/20201130190241.png" alt="img"><br>但我们从这个语句可以发现，他不是直接在select里面添加双引号 而定义一个$cookee1 并且这个cookee1=”$cookee”<img src="https://raw.githubusercontent.com/Hwwg/myphoto/master/20201130190900.png" alt="img"><br>其实按照php的语法上面那个其实可以等价为下面那个，但是我不知道他为啥要这样操作？更安全吗？<br>然后就直接把上一题的单引号和括号换成双引号就行，其他的没啥区别</p>
<h2 id="23关"><a href="#23关" class="headerlink" title="23关"></a>23关</h2><p>23关 又回到了以前熟悉的界面 但是好像跟之前的有不太一样，因为加了单引号报错 加了双引号和and1=1 and1=2 却不报错 让我们再来研究一下源码<img src="https://raw.githubusercontent.com/Hwwg/myphoto/master/20201130195221.png" alt="img"><br>这里介绍一个函数<br><strong>preg_replace</strong>替换函数<br>preg_replace 函数执行一个正则表达式的搜索和替换。<br><strong>语法</strong>：<br>preg_replace(要替换的东西，替换成啥东西，哪个里面的东西需要替换);<br>知道这个以后我们不难发现，再上面这个代码中 我们的注释符需要替换。 那么注释符被替换我们该如何实现注入呢？<br>我们要回归<strong>使用注释符的本质</strong>：没加注释符前后面的语句因为没有闭合所以会报错，所以我们加了注释符直接让其消失就好了，而现在没了注释符，我们就需要将语句闭合起来，使其不报错，叫做<strong>单引号闭合绕过</strong>这个其实之前遇到过 加了超级多引号，我看太麻烦就没去试，今天看来不得不试了！！！<br>在之前更正的原理中，我们知道了闭合单引号的真相，所以这关现在就显得很简单了<br><strong>有个问题</strong>：为啥order by 在这里好像不管怎么放置都是错误的，这就很纳闷了？？order by 后面加数字，加字段名都是可以的，但是字段名是不可以带引号的，意思是让这个列排序，但是因为单引号闭合后里面的数字变成字符串了这就产生了语法错误。</p>
<p>更本质的说法是：不只order by，凡是字符串但又不能加引号的位置都不能参数化；包括sql关键字、库名表名字段名函数名等等<br>来自46关的一个补充纠错</p>
<p><strong>payload：</strong>?id=-1’union select 1,database(),’3 这个时候数据库就出来了<br><strong>payload：</strong>?id=-1’union select 1,group_concat(table_name),3 from information_schema.tables where table_schema=’security’ or’1=1<br><img src="https://raw.githubusercontent.com/Hwwg/myphoto/master/20201130213549.png" alt="img" style="zoom:67%;"></p>
<h2 id="第24关"><a href="#第24关" class="headerlink" title="第24关"></a>第24关</h2><p>这关就和之前的很不一样了<br>查阅资料后 知道一件事：<strong>SQL注入一般分为两类：一阶SQL注入（普通SQL注入），二阶SQL注入</strong><br><strong>什么是二阶注入</strong>：<br>1.构造带有注入语句的危险payload1数据，在http请求中提交到服务器当中，该数据会被服务器存储到数据库当中<br>2.当我们要修改该payload1数据的时候，程序在检索存储payload1的数据库的时候将会造成SQL注入，如果攻击成功，在第二次响应中返回结果<br>3.也称为存储型注入，将可能造成sql注入的语句存储到数据库中，当再次调用该数据的时候，就可能发生SQL注入。<br>先来看看源码<br>先从index.php看起：一开始就是一个session_start()函数<br><strong>seession</strong>：<br><a target="_blank" rel="noopener" href="https://blog.csdn.net/zhengxijia2012/article/details/73437376">https://blog.csdn.net/zhengxijia2012/article/details/73437376</a><br>谈谈我的理解，为什么我们一开始cookies可以在多个页面保存使用，就是因为有这个session函数发挥作用<br>然后在其他源码中，我们不难发现，基本上每个数据都有过滤操作，但是我发现 在pass_change的时候，他的username是没有过滤操作的<img src="https://raw.githubusercontent.com/Hwwg/myphoto/master/20201201115020.png" alt="img"><br>如上，在下面的update语句中 username是直接从数据库被调用的，这就意味着我们可能可以通过这个数据进行注入（二阶注入），如果我们要利用这点，也就是说我们必须有数据是带有危险字符的存储在数据库当中，那么接下来，我们需要在数据库中构建这样一个数据，从上面的代码中我们发现他的username是用单引号闭合的，所以我们需要构建一个单引号注入的数据——admin’# ，这里有个<strong>问题</strong>：不是被转义了吗，为啥在数据中还会以单引号的形式存在，这是因为转义只是暂时的，存储以后还是以单引号的形式存在的<img src="https://raw.githubusercontent.com/Hwwg/myphoto/master/20201201004552.png" alt="img" style="zoom:67%;"></p>
<img src="https://raw.githubusercontent.com/Hwwg/myphoto/master/20201201004553.png" alt="img" style="zoom:67%;"> 

<img src="https://raw.githubusercontent.com/Hwwg/myphoto/master/20201201004554.png" alt="img" style="zoom:67%;">
接下来我们研究一下 为啥可以更改
原SQL语句：
UPDATE users SET PASSWORD='$pass' where username='$username' and password='$curr_pass'
修改密码的SQL语句：
update users set password='$pass' where username='$username' and password='$curr_pass'
最后真正执行的sql语句：
update users set password=='$pass' where username='admin'
但是这个具有一定的局限性，就是说，我们只能修改特定的用户的密码，比如说我想修改上表中的dumb，那么我就得在创建一个dumb'#的数据存储在数据库当中。
接下来我们看看有没有其他攻击手法：
**1报错注入：**
![img](https://raw.githubusercontent.com/Hwwg/myphoto/master/20201201122617.png)

<p>有错就die网页，so 报错注入不行<br><strong>2.延时注入</strong><br>有字符数限制，所以不行</p>
<h2 id="第25关"><a href="#第25关" class="headerlink" title="第25关"></a>第25关</h2><p>首先看一下源代码：发现定义了blacklist()函数<br><img src="https://raw.githubusercontent.com/Hwwg/myphoto/master/20201201124258.png" alt="img"><br><img src="https://raw.githubusercontent.com/Hwwg/myphoto/master/20201201124257.png" alt="img"><br>作用如下，就是过滤掉 or 和and，那么我们该如何绕过呢？<br><img src="https://raw.githubusercontent.com/Hwwg/myphoto/master/20201201124851.png" alt="img"><br>看到这个我们就知道是单引号注入，接下来我试着构建payload试试<br>从那个preg_replace函数中我们可以看出，他是将or转义成啥都没有，所以有一种思路是，在and里面插入and 转义完后即可留下我们本来的语句<br>所以<strong>payload</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">?id&#x3D;1&#39;aandnd 1&#x3D;2 --+</span><br><span class="line">?id&#x3D;1&#39;oorrder by 3 --+</span><br></pre></td></tr></table></figure>

<img src="https://raw.githubusercontent.com/Hwwg/myphoto/master/20201201125357.png" alt="img" style="zoom: 67%;">
OK  绕过成功  然后我们只需要用order by 查询字符段数目，然后union拼接一下语句即可绕过。
这里出现了一个$hint=$id; 然后最后又return了一个i$id，所以我们可以知道,$hint是用来储存存放数据的，作用是更方便，不过这也让我们知道我们输入的语句到程序里面会变成啥样的。

<p><strong>其他绕过方法</strong><br>绕过思路：<br>（1）大小写变形 Or,OR,oR<br>（2）编码，hex，urlencode<br>（3）添加注释/or/<br>（4）利用符号 and=&amp;&amp; or=||<br>（5）双写绕过<br><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_42181428/article/details/105061424?utm_medium=distribute.pc_relevant.none-task-blog-OPENSEARCH-3.control&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-OPENSEARCH-3.control">https://blog.csdn.net/qq_42181428/article/details/105061424?utm_medium=distribute.pc_relevant.none-task-blog-OPENSEARCH-3.control&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-OPENSEARCH-3.control</a> 这个是关于绕过的以及CTF题目的一篇文章，感觉还挺厉害</p>
<p>我又没保存博客人傻了——-<br>第25关a和25关没多大区别</p>
<h2 id="26关"><a href="#26关" class="headerlink" title="26关"></a>26关</h2><p>先研究一下源代码</p>
<p><img src="https://raw.githubusercontent.com/Hwwg/myphoto/master/20201201155743.png" alt="img"></p>
<p>首先是一个新函数<br><strong>fopen()函数</strong><br>fopen()函数用于打开文件文件或者URL，<br><strong>语法</strong>:<br>fopen(filename,mode,include_path,context)<img src="https://raw.githubusercontent.com/Hwwg/myphoto/master/20201201155935.png" alt="img"><br>而在这个里面的意思是 打开那个txt然后写入数据。<br>我们接着往下看<br><img src="https://raw.githubusercontent.com/Hwwg/myphoto/master/20201201160042.png" alt="img"></p>
<p>在这关当中，他过滤了很多东西 我们依次来看看吧，分别是：</p>
<p>三种注释符，空格，还有反斜杠，还有and，or（<strong>这里要特别注意information里面有个or所以也会被过滤， 所以在注入的时候记得注意也要双写</strong>）<br>好了 接下来我们开始试着绕过：<br>1.因为空格被过滤了，所以我们可以采取是用括号的方式绕过这个过滤<br>2.由于注释符过滤，除了用一些特殊的字符代表注释符，我们这里先采用闭合单引号的方式绕过，那么我们知道，单引号内的内容会被转变成字符串，所以有用到数字的方法在这里都行不通，使用union拼接语句的时候，可以获取到数据库，但是再往下由于要使用limit所以也不行了，所以这里我们采取报错注入的方式：<br>构建payload：<br>//<strong>?id=1’aandnd(extractvalue(1,concat(‘<del>‘,database(),’</del>‘)))aandnd’1’=’1</strong>//<br>//<strong>?id=1’aandnd(extractvalue(1,concat(‘<del>‘,(select(group_concat(table_name))from(infoorrmation_schema.tables)where(table_schema)=’security’),’</del>‘)))aandnd’1’=’1</strong>//<br> <img src="https://raw.githubusercontent.com/Hwwg/myphoto/master/20201201192222.png" alt="img" style="zoom: 50%;"><br><img src="https://raw.githubusercontent.com/Hwwg/myphoto/master/20201202132344.png" alt="img" style="zoom:67%;"></p>
<h2 id="第26a关"><a href="#第26a关" class="headerlink" title="第26a关"></a>第26a关</h2><p>这关和26关没有多大区别，唯一区别是这里需要采取单引号+括号的形式来注入<br>还是有其他区别的，比如在这关当中，他是不输出报错信息的，并且因为是采取单引号+括号闭合方式进行注入的，如果我们想要时间盲注的方式，也不太行因为闭合以后，单引号加括号里面的内容就会变成字符，跟之前用不了order by是一个意思。<br>查了一下好像确实只能用%a0进行绕过了，然后接下来需要安装一下虚拟机</p>
<h2 id="第27关"><a href="#第27关" class="headerlink" title="第27关"></a>第27关</h2><p>这关过滤的是<br><img src="https://raw.githubusercontent.com/Hwwg/myphoto/master/20201202193040.png" alt="img" style="zoom:67%;"><br>这关过滤的有如下内容，但是我们可以发现，这次没有过滤and但是过滤了select和union还有注释符那些<br>然后我们可以发现，这一次的正则表达式和前面几个又有点不太一样，反斜杠后面又多了一些字母<br>作用如下：</p>
<img src="https://raw.githubusercontent.com/Hwwg/myphoto/master/20201202195735.png" alt="img" style="zoom:67%;">

<p>资料来源：[<a target="_blank" rel="noopener" href="https://www.baidu.com/s?rsv_op=c2KYgWdLVYcV2R3VPVh1WafSTX6XL0b2NMNbgbbP5faVPMWOgMNVVPSOQOU9XXcQghM678gVQZ9QeQaJYeYWeIR0335XMNab436TIP42cPUMd06IThM4hLJa&amp;wd=fopen%E5%87%BD%E6%95%B0&amp;ie=utf-8&amp;tn=49055317_3_hao_pg%5D">https://www.baidu.com/s?rsv_op=c2KYgWdLVYcV2R3VPVh1WafSTX6XL0b2NMNbgbbP5faVPMWOgMNVVPSOQOU9XXcQghM678gVQZ9QeQaJYeYWeIR0335XMNab436TIP42cPUMd06IThM4hLJa&amp;wd=fopen%E5%87%BD%E6%95%B0&amp;ie=utf-8&amp;tn=49055317_3_hao_pg]</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/onthewaygun/article/details/10009021?utm_medium=distribute.pc_relevant.none-task-blog-searchFromBaidu-1.control&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-searchFromBaidu-1.control%E6%A0%B9%E6%8D%AE%E4%BB%A5%E4%B8%8A%E8%B5%84%E6%96%99">https://blog.csdn.net/onthewaygun/article/details/10009021?utm_medium=distribute.pc_relevant.none-task-blog-searchFromBaidu-1.control&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-searchFromBaidu-1.control根据以上资料</a> 我们可以知道，这次的正则表达式替换的更加牛，他是一直在替换，就是说不能双鞋，因为你双写完以后替换过一遍，待会还会再替换一次，所以这里我们只能采用大小写混搭的方式进行注入<br>//刚刚居然崩溃了–导致没保存。。成年人的崩溃就在一瞬间。。。。。。//</p>
<p>那我们接下来构建payload：<br>?id=1’and(extractvalue(1,concat(‘<del>‘,database(),’</del>‘)))and’1=1<br>?id=1’and(extractvalue(1,concat(‘<del>‘,(seLeCt(group_concat(table_name))from(table_schema))=’security’),’</del>‘)))and’1=1<br><img src="https://raw.githubusercontent.com/Hwwg/myphoto/master/20201202213910.png" alt="img" style="zoom:67%;"><br><img src="https://raw.githubusercontent.com/Hwwg/myphoto/master/20201203122737.png" alt="img" style="zoom: 50%;"></p>
<p>下面也是这样的一套组合拳，其实我发现，我们可以利用报错注入的原因是在报错注入的时候我们可以将所有数据一起报错出来（group_concat）函数，但是当只能使用时间盲注的时候就没办法了，因为都是需要数字说明截取。<br>这里有个问题，为什么在下面的查询语句中or无法报错，但是and可以报错</p>
<p>27a关因为无报错信息所以只好采取时间盲注或者union select联合注入，然后就需要用到特殊转义字符。。<br>开始搭linux系统</p>
<h2 id="第28关"><a href="#第28关" class="headerlink" title="第28关"></a>第28关</h2><img src="https://raw.githubusercontent.com/Hwwg/myphoto/master/20201203124541.png" alt="img" style="zoom:67%;">

<p>感觉还是需要使用linux系统进行操作会比较方便一些，用括号的方式进行闭合太累了<br>28a关也和这个差不多</p>
<p>小结一下：<br>1.最近做的都是被过滤的题目，要如何绕过过滤方法也就是这几种似乎也没啥好说的了–<br>2.然后源代码的学习挺有用的，感觉看源代码对于整个过程会更了解一些，然后注入的过程也更有感触了。<br>参考链接：<a target="_blank" rel="noopener" href="https://www.cnblogs.com/forforever/p/13764024.html">https://www.cnblogs.com/forforever/p/13764024.html</a></p>
</div><div class="article-tags is-size-7 mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/sql%E6%B3%A8%E5%85%A5/">sql注入</a></div><!--!--></article></div><!--!--><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/2020/12/03/sqlilabs7/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">sqlilabs7</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2020/11/20/sqlilabs5/"><span class="level-item">sqlilabs5</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><!--!--></div><!--!--><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/">Tlife</a><p class="is-size-7"><span>&copy; 2023 vague huang</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><!--!--><script src="/js/main.js" defer></script><!--!--><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/hijiki.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":true},"log":false});</script></body></html>